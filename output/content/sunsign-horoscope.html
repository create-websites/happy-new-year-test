<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Your Daily Horoscope for 2026. Insights for Aries, Taurus, Gemini, and all zodiac signs." name="description"/>
    <title>Daily Horoscope | New Year 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Vollkorn:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Vollkorn', serif;
            background-color: #fff1f2; /* bg-rose-50 */
            color: #292524; /* text-stone-800 */
            background-image: linear-gradient(rgba(255, 241, 242, 0.95), rgba(255, 241, 242, 0.95)), url('https://storage.googleapis.com/kreatewebsite/banner_all/Happy-New-Year-Photos.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        h1, h2, h3 { font-weight: 700; }

        /* Navigation Bar */
        .nav-glass {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid #ffe4e6;
        }

        .nav-link { color: #57534e; transition: color 0.2s; }
        .nav-link:hover { color: #9f1239; }

        /* Card Styling */
        .horoscope-card {
            background-color: rgba(255, 255, 255, 0.7);
            border: 1px solid #ffe4e6;
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(4px);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .horoscope-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -5px rgba(244, 63, 94, 0.15);
            border-color: #fda4af;
            background-color: rgba(255, 255, 255, 0.95);
        }

        /* Form Elements */
        .input-rose {
            border: 1px solid #e7e5e4;
            background-color: rgba(255, 255, 255, 0.8);
            color: #292524;
            border-radius: 999px;
            padding: 10px 20px;
            outline: none;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }
        .input-rose:focus {
            border-color: #be123c;
            box-shadow: 0 0 0 3px rgba(253, 164, 175, 0.3);
        }

        .btn-rose {
            background-color: #be123c;
            color: white;
            padding: 10px 24px;
            border-radius: 999px;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(190, 18, 60, 0.2);
        }
        .btn-rose:hover {
            background-color: #9f1239;
            transform: translateY(-1px);
        }

        /* Pill Navigation */
        .pill {
            display: inline-flex; align-items: center; gap: 8px;
            border: 1px solid #fecdd3; border-radius: 999px;
            padding: 6px 14px; background: rgba(255, 255, 255, 0.6);
            color: #881337; font-size: 0.85rem; font-weight: 600;
            text-decoration: none; transition: all 0.2s;
        }
        .pill:hover { background: #fff1f2; border-color: #be123c; }

        /* Skeleton Loader */
        .skeleton {
            background: #f3f4f6;
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
        }
        .skeleton::after {
            content: "";
            position: absolute;
            top: 0; left: -60%;
            width: 60%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 100% { left: 120%; } }

        /* Mobile Menu */
        #mobile-menu { background: rgba(255, 255, 255, 0.95); }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col overflow-x-hidden text-stone-800">

    <!-- Navigation -->
    <nav class="w-full nav-glass sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 flex items-center gap-3">
                    <a href="index.html" class="flex items-center gap-2 group">
                        <span class="text-2xl text-rose-600 group-hover:scale-110 transition-transform">âœ¨</span>
                        <span class="text-xl font-bold tracking-wide uppercase text-rose-900 group-hover:text-rose-700">Happy New Year</span>
                    </a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="index.html" class="nav-link px-3 py-2 rounded-md text-base font-semibold">Home</a>
                        <a href="index.html#resolutions" class="nav-link px-3 py-2 rounded-md text-base font-semibold">Resolutions</a>
                        <a href="2025-global-events-hub.html" class="nav-link px-3 py-2 rounded-md text-base font-semibold">2025 Review</a>
                        <a href="#" class="nav-link px-3 py-2 rounded-md text-base font-semibold text-rose-800 border-b-2 border-rose-800">Horoscope</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button class="text-stone-600 hover:text-rose-800" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden border-t border-rose-100" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="text-stone-600 hover:text-rose-800 block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="2025-global-events-hub.html" class="text-stone-600 hover:text-rose-800 block px-3 py-2 rounded-md text-base font-medium">2025 Review</a>
                <a href="#" class="text-rose-900 font-bold block px-3 py-2 rounded-md text-base">Horoscope</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-8 text-center">
        <div class="inline-block px-4 py-1 rounded-full border border-rose-200 bg-white/60 text-rose-800 text-xs font-bold tracking-[0.2em] uppercase mb-4 backdrop-blur-sm">
            Daily Guidance
        </div>
        <h1 class="text-4xl md:text-6xl font-bold text-rose-900 mb-4 tracking-tight">
            Daily Horoscope
        </h1>
        <p class="text-lg text-stone-600 max-w-2xl mx-auto italic mb-8">
            Align your day with the stars. Select a date and sign below.
        </p>

        <!-- Controls Form -->
        <form id="controls" class="bg-white/50 backdrop-blur-sm p-6 rounded-2xl border border-rose-100 shadow-sm max-w-4xl mx-auto">
            <div class="flex flex-col md:flex-row gap-4 items-end justify-center">
                <div class="w-full md:w-auto text-left">
                    <label for="date" class="block text-xs font-bold text-rose-900 uppercase tracking-wider mb-2 ml-2">Date</label>
                    <input id="date" name="date" type="date" class="input-rose w-full" />
                </div>

                <div class="w-full md:w-auto text-left">
                    <label for="sunsign" class="block text-xs font-bold text-rose-900 uppercase tracking-wider mb-2 ml-2">Sign (Optional)</label>
                    <select id="sunsign" name="sunsign" class="input-rose w-full">
                        <option value="">All Signs</option>
                        <option value="aries">Aries</option>
                        <option value="taurus">Taurus</option>
                        <option value="gemini">Gemini</option>
                        <option value="cancer">Cancer</option>
                        <option value="leo">Leo</option>
                        <option value="virgo">Virgo</option>
                        <option value="libra">Libra</option>
                        <option value="scorpio">Scorpio</option>
                        <option value="sagittarius">Sagittarius</option>
                        <option value="capricorn">Capricorn</option>
                        <option value="aquarius">Aquarius</option>
                        <option value="pisces">Pisces</option>
                    </select>
                </div>

                <div class="w-full md:w-auto text-left">
                    <label for="viewMode" class="block text-xs font-bold text-rose-900 uppercase tracking-wider mb-2 ml-2">View Mode</label>
                    <select id="viewMode" name="viewMode" class="input-rose w-full">
                        <option value="element" selected>By Element</option>
                        <option value="flat">Grid View</option>
                    </select>
                </div>

                <div class="w-full md:w-auto">
                    <button type="submit" class="btn-rose w-full md:w-auto">
                        <i class="fa-solid fa-sparkles mr-2"></i> Reveal
                    </button>
                </div>
            </div>

            <div id="jumpBar" class="flex flex-wrap justify-center gap-3 mt-6 border-t border-rose-100 pt-4" style="display:none;">
                <a href="#fire" class="pill">ðŸ”¥ Fire</a>
                <a href="#earth" class="pill">ðŸŒ¿ Earth</a>
                <a href="#air" class="pill">ðŸ’¨ Air</a>
                <a href="#water" class="pill">ðŸ’§ Water</a>
            </div>
        </form>
    </div>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20 w-full">
        
        <div id="status" class="text-center text-sm text-stone-500 mb-6 italic"></div>
        <div id="content"></div>

    </main>

    <!-- Footer -->
    <footer class="bg-white/60 backdrop-blur-md border-t border-rose-100 py-12 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <span class="text-2xl font-bold text-rose-900 tracking-wide uppercase">Happy New Year</span>
            <p class="mt-4 text-stone-600 text-sm">
                May the stars guide you to a prosperous 2026.
            </p>
            <div class="flex justify-center space-x-6 mt-6">
                <a href="#" class="text-stone-500 hover:text-rose-700"><i class="fa-brands fa-twitter text-xl"></i></a>
                <a href="#" class="text-stone-500 hover:text-rose-700"><i class="fa-brands fa-instagram text-xl"></i></a>
                <a href="#" class="text-stone-500 hover:text-rose-700"><i class="fa-brands fa-facebook text-xl"></i></a>
            </div>
            <p class="text-stone-400 text-xs mt-8">Â© 2025-2026 New Year Network. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const BUCKET_BASE = "https://storage.googleapis.com/dayhoroscope";

        const ELEMENTS = [
            { id: "fire",  label: "Fire Signs",  emoji: "ðŸ”¥", signs: ["aries", "leo", "sagittarius"] },
            { id: "earth", label: "Earth Signs", emoji: "ðŸŒ¿", signs: ["taurus", "virgo", "capricorn"] },
            { id: "air",   label: "Air Signs",   emoji: "ðŸ’¨", signs: ["gemini", "libra", "aquarius"] },
            { id: "water", label: "Water Signs", emoji: "ðŸ’§", signs: ["cancer", "scorpio", "pisces"] },
        ];
        const ALL_SIGNS = ELEMENTS.flatMap(e => e.signs);

        function qs() { return new URLSearchParams(window.location.search); }

        function isoTodayLocal() {
            const d = new Date();
            const yyyy = d.getFullYear();
            const mm = String(d.getMonth() + 1).padStart(2, "0");
            const dd = String(d.getDate()).padStart(2, "0");
            return `${yyyy}-${mm}-${dd}`;
        }

        function normalizeSign(s) {
            const v = (s || "").toLowerCase().trim();
            return ALL_SIGNS.includes(v) ? v : "";
        }

        function buildUrl(date, sunsign) {
            return `${BUCKET_BASE}/${encodeURIComponent(date)}/${encodeURIComponent(sunsign)}.json`;
        }

        function setQueryParams(date, sunsignOrEmpty, viewMode) {
            const u = new URL(window.location.href);
            u.searchParams.set("date", date);
            if (sunsignOrEmpty) u.searchParams.set("sunsign", sunsignOrEmpty);
            else u.searchParams.delete("sunsign");
            u.searchParams.set("view", viewMode || "element");
            window.history.replaceState({}, "", u.toString());
        }

        async function fetchJson(url) {
            const res = await fetch(url, { cache: "no-store" });
            if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);
            return await res.json();
        }

        function renderHoroscopeCard(json, fallbackSign, fallbackDate) {
            const sign = (json && json.sign) ? json.sign : fallbackSign;
            const date = (json && json.date) ? json.date : fallbackDate;
            const horoscope = (json && json.horoscope) ? json.horoscope : "";

            // Capitalize Sign
            const displaySign = sign.charAt(0).toUpperCase() + sign.slice(1);

            const card = document.createElement("div");
            card.className = "horoscope-card group";

            card.innerHTML = `
                <div class="flex justify-between items-center mb-4 pb-4 border-b border-rose-100">
                    <h3 class="text-xl font-bold text-rose-900 group-hover:text-rose-700 transition-colors">${displaySign}</h3>
                    <span class="text-xs text-stone-500 font-mono">${date}</span>
                </div>
                <div class="text-stone-700 leading-relaxed font-sans text-sm flex-grow">
                    ${horoscope || '<span class="text-stone-400 italic">No forecast available.</span>'}
                </div>
                <div class="mt-4 pt-2 text-right">
                    <i class="fa-solid fa-star text-rose-200 group-hover:text-rose-400 transition-colors"></i>
                </div>
            `;
            return card;
        }

        function renderSkeletonCard(label, date) {
            const displaySign = label.charAt(0).toUpperCase() + label.slice(1);
            
            const card = document.createElement("div");
            card.className = "horoscope-card opacity-80";

            card.innerHTML = `
                <div class="flex justify-between items-center mb-4 pb-4 border-b border-rose-100">
                    <h3 class="text-xl font-bold text-stone-400">${displaySign}</h3>
                    <span class="text-xs text-stone-300 font-mono">${date}</span>
                </div>
                <div class="space-y-3">
                    <div class="skeleton h-4 w-full"></div>
                    <div class="skeleton h-4 w-5/6"></div>
                    <div class="skeleton h-4 w-4/6"></div>
                </div>
            `;
            return card;
        }

        function showJumpBar(show) {
            document.getElementById("jumpBar").style.display = show ? "flex" : "none";
        }

        // --- Rendering Layouts ---

        function renderFlatSkeletons(date) {
            const content = document.getElementById("content");
            content.innerHTML = "";
            showJumpBar(false);

            const grid = document.createElement("div");
            grid.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6";

            const placeholderBySign = {};
            ALL_SIGNS.forEach(sign => {
                const sk = renderSkeletonCard(sign, date);
                placeholderBySign[sign] = sk;
                grid.appendChild(sk);
            });

            content.appendChild(grid);
            return placeholderBySign;
        }

        function renderElementSkeletons(date) {
            const content = document.getElementById("content");
            content.innerHTML = "";
            showJumpBar(true);

            const placeholderBySign = {};

            ELEMENTS.forEach(el => {
                const section = document.createElement("section");
                section.className = "mb-12 scroll-mt-24";
                section.id = el.id;

                const header = document.createElement("div");
                header.className = "flex items-center gap-3 mb-6 pb-2 border-b-2 border-rose-200";
                
                header.innerHTML = `
                    <span class="text-3xl">${el.emoji}</span>
                    <h2 class="text-2xl font-bold text-rose-900">${el.label}</h2>
                    <span class="ml-auto text-xs font-bold text-stone-400 uppercase tracking-widest" data-meta-for="${el.id}">Loading...</span>
                `;

                const grid = document.createElement("div");
                grid.className = "grid grid-cols-1 md:grid-cols-3 gap-6";

                el.signs.forEach(sign => {
                    const sk = renderSkeletonCard(sign, date);
                    placeholderBySign[sign] = sk;
                    grid.appendChild(sk);
                });

                section.appendChild(header);
                section.appendChild(grid);
                content.appendChild(section);
            });

            return placeholderBySign;
        }

        function updateSectionMeta(sectionId, loadedCount, total) {
            const meta = document.querySelector(`[data-meta-for="${sectionId}"]`);
            if (meta) meta.textContent = `${loadedCount}/${total} Ready`;
        }

        // --- Loading Logic ---

        async function loadAll(date, viewMode) {
            const status = document.getElementById("status");
            status.textContent = `Connecting to stars for ${date}...`;

            const placeholders = viewMode === "flat" ? renderFlatSkeletons(date) : renderElementSkeletons(date);

            const elementBySign = {};
            ELEMENTS.forEach(el => el.signs.forEach(s => elementBySign[s] = el.id));
            const loadedByElement = { fire: 0, earth: 0, air: 0, water: 0 };
            const totalByElement = {
                fire: ELEMENTS.find(e => e.id === "fire").signs.length,
                earth: ELEMENTS.find(e => e.id === "earth").signs.length,
                air: ELEMENTS.find(e => e.id === "air").signs.length,
                water: ELEMENTS.find(e => e.id === "water").signs.length,
            };

            let okCount = 0;

            await Promise.all(ALL_SIGNS.map(async (signKey) => {
                const url = buildUrl(date, signKey);
                try {
                    const json = await fetchJson(url);
                    okCount += 1;
                    const card = renderHoroscopeCard(json, signKey, date);
                    const sk = placeholders[signKey];
                    if (sk && sk.parentNode) sk.parentNode.replaceChild(card, sk);
                } catch (e) {
                    const errCard = document.createElement("div");
                    errCard.className = "horoscope-card bg-red-50 border-red-200";
                    errCard.innerHTML = `
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-red-800 capitalize">${signKey}</h3>
                        </div>
                        <div class="text-red-600 text-sm">Failed to load forecast.</div>
                    `;
                    const sk = placeholders[signKey];
                    if (sk && sk.parentNode) sk.parentNode.replaceChild(errCard, sk);
                } finally {
                    status.textContent = `Manifested ${okCount}/${ALL_SIGNS.length} signs`;
                    if (viewMode !== "flat") {
                        const elId = elementBySign[signKey];
                        if (elId) {
                            loadedByElement[elId] += 1;
                            updateSectionMeta(elId, loadedByElement[elId], totalByElement[elId]);
                        }
                    }
                }
            }));
        }

        async function loadSingle(date, signKey) {
            const status = document.getElementById("status");
            const content = document.getElementById("content");
            showJumpBar(false);

            const url = buildUrl(date, signKey);
            status.textContent = `Consulting the stars...`;

            content.innerHTML = "";
            const grid = document.createElement("div");
            grid.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto";
            const sk = renderSkeletonCard(signKey, date);
            grid.appendChild(sk);
            content.appendChild(grid);

            try {
                const json = await fetchJson(url);
                status.textContent = `Forecast ready for ${signKey}`;
                const card = renderHoroscopeCard(json, signKey, date);
                if (sk.parentNode) sk.parentNode.replaceChild(card, sk);
            } catch (err) {
                status.textContent = "Alignment error.";
                sk.innerHTML = `<div class="p-4 text-red-600">Failed to load data. Please try another date.</div>`;
            }
        }

        async function load(date, sunsignOrEmpty, viewMode) {
            setQueryParams(date, sunsignOrEmpty, viewMode);
            if (!sunsignOrEmpty) return loadAll(date, viewMode);
            return loadSingle(date, sunsignOrEmpty);
        }

        // --- Init ---

        const params = qs();
        const initialDate = params.get("date") || isoTodayLocal();
        const initialSign = normalizeSign(params.get("sunsign") || "");
        const initialView = (params.get("view") === "flat") ? "flat" : "element";

        document.getElementById("date").value = initialDate;
        document.getElementById("sunsign").value = initialSign;
        document.getElementById("viewMode").value = initialView;

        function syncViewModeVisibility() {
            const signVal = normalizeSign(document.getElementById("sunsign").value || "");
            document.getElementById("viewMode").disabled = !!signVal;
            showJumpBar(!signVal && document.getElementById("viewMode").value === "element");
        }
        
        document.getElementById("sunsign").addEventListener("change", syncViewModeVisibility);
        document.getElementById("viewMode").addEventListener("change", syncViewModeVisibility);

        document.getElementById("controls").addEventListener("submit", (e) => {
            e.preventDefault();
            const date = document.getElementById("date").value || isoTodayLocal();
            const sign = normalizeSign(document.getElementById("sunsign").value || "");
            const view = document.getElementById("viewMode").value || "element";
            syncViewModeVisibility();
            load(date, sign, view);
        });

        syncViewModeVisibility();
        load(initialDate, initialSign, initialView);
    </script>
</body>
</html>